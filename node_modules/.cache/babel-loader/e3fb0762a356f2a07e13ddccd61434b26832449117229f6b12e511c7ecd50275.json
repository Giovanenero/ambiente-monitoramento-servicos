{"ast":null,"code":"import http from \"./http-common\";\nimport DataParse from \"../helpers/DataParse\";\n\n//função que retorna as informações do usuário pelo token\nfunction infouser(token) {\n  return http.post(\"/getuser/\", {\n    token\n  }).then(response => {\n    return response.data;\n  }).catch(error => console.log(error));\n}\n\n//função que retorna todos os usuários do sistema\nfunction systemusers(token) {\n  return http.post(\"/getsystemusers/\", {\n    token\n  }).then(response => {\n    let userTimeAction = function (userId) {\n      useraccess(token, userId).then(data => {\n        if (data.length > 0) {\n          console.log(data[0].date);\n          let time = DataParse.parseDate(data[0].date);\n          if (time) {\n            return {\n              time: time.day + \" às \" + time.hour,\n              action: data[0].jobType\n            };\n          }\n        }\n      }).catch(error => console.log(error));\n    };\n    if (response.data) {\n      let data = response.data;\n      userTimeAction(data.userId);\n      return data;\n    }\n    // if(response.data){\n    //     let teste = async (userId) => {\n    //         return new Promise((resolve) => {\n    //             useraccess(token, userId)\n    //             .then(data => {\n    //                 if(data !== undefined && data.length > 0){\n    //                     console.log(data);\n    //                     let time = DataParse.parseDate(data[0].date);\n    //                     if(time){\n    //                         newAux = {\n    //                             time: time.day + \" às \" + time.hour,\n    //                             action: data.jobType,\n    //                         }\n    //                     }\n    //                 } \n    //                 resolve();\n    //             })\n    //             .catch(error => console.log(error));\n    //         })\n    //     }\n    //     return auxData;\n    // }\n  }).catch(error => console.log(error));\n}\n\n//função que retorna todos os usuários online\nfunction systemlogs(token) {\n  // eslint-disable-next-line \n  return http.post(\"/getloggedusers/\", {\n    token\n  }).then(response => {\n    return response.data;\n  }).catch(error => console.log(error));\n}\n\n//função que retorna os registros do sistema de um usuário em específico pelo seu ID\nfunction useraccess(token, id) {\n  return http.post(\"/getsystemlogsbyuserid/\", {\n    token,\n    id\n  }).then(response => {\n    return response.data;\n  }).catch(error => console.log(error));\n}\nconst endpoint = {\n  systemusers,\n  systemlogs,\n  useraccess,\n  infouser\n};\nexport default endpoint;","map":{"version":3,"names":["http","DataParse","infouser","token","post","then","response","data","catch","error","console","log","systemusers","userTimeAction","userId","useraccess","length","date","time","parseDate","day","hour","action","jobType","systemlogs","id","endpoint"],"sources":["/home/lapti/ambiente-monitoramento-servicos/src/endpoint/SystemUsers.jsx"],"sourcesContent":["import http from \"./http-common\";\nimport DataParse from \"../helpers/DataParse\";\n\n//função que retorna as informações do usuário pelo token\nfunction infouser(token){\n    return http\n        .post(\"/getuser/\", {token})\n        .then(response => {return response.data})\n        .catch(error => console.log(error));\n}\n\n//função que retorna todos os usuários do sistema\nfunction systemusers(token){\n    return http\n        .post(\"/getsystemusers/\", {\n            token,\n        })\n        .then(response => {\n            let userTimeAction = function(userId) {\n                useraccess(token, userId)\n                .then(data => {\n                    if(data.length > 0){\n                        console.log(data[0].date);\n                        let time = DataParse.parseDate(data[0].date);\n                        if(time){\n                            return {\n                                time: time.day + \" às \" + time.hour,\n                                action: data[0].jobType,\n                            }\n                        }\n                    }\n                })\n                .catch(error => console.log(error));\n            }\n            if(response.data){\n                let data = response.data;\n                userTimeAction(data.userId);\n                return data;\n            }\n            // if(response.data){\n            //     let teste = async (userId) => {\n            //         return new Promise((resolve) => {\n            //             useraccess(token, userId)\n            //             .then(data => {\n            //                 if(data !== undefined && data.length > 0){\n            //                     console.log(data);\n            //                     let time = DataParse.parseDate(data[0].date);\n            //                     if(time){\n            //                         newAux = {\n            //                             time: time.day + \" às \" + time.hour,\n            //                             action: data.jobType,\n            //                         }\n            //                     }\n            //                 } \n            //                 resolve();\n            //             })\n            //             .catch(error => console.log(error));\n            //         })\n            //     }\n            //     return auxData;\n            // }\n        })\n        .catch(error => console.log(error));\n}\n\n//função que retorna todos os usuários online\nfunction systemlogs(token){\n    // eslint-disable-next-line \n    return http.\n        post(\"/getloggedusers/\", {\n            token,\n        })\n        .then(response => {\n            return response.data;\n        })\n        .catch(error => console.log(error));\n}\n\n//função que retorna os registros do sistema de um usuário em específico pelo seu ID\nfunction useraccess(token, id){\n    return http.post(\"/getsystemlogsbyuserid/\", {\n        token,\n        id,\n    })\n    .then(response => {return response.data})\n    .catch(error => console.log(error))\n}\n\nconst endpoint = {\n    systemusers,\n    systemlogs,\n    useraccess,\n    infouser,\n};\n\nexport default endpoint;"],"mappings":"AAAA,OAAOA,IAAI,MAAM,eAAe;AAChC,OAAOC,SAAS,MAAM,sBAAsB;;AAE5C;AACA,SAASC,QAAQ,CAACC,KAAK,EAAC;EACpB,OAAOH,IAAI,CACNI,IAAI,CAAC,WAAW,EAAE;IAACD;EAAK,CAAC,CAAC,CAC1BE,IAAI,CAACC,QAAQ,IAAI;IAAC,OAAOA,QAAQ,CAACC,IAAI;EAAA,CAAC,CAAC,CACxCC,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;AAC3C;;AAEA;AACA,SAASG,WAAW,CAACT,KAAK,EAAC;EACvB,OAAOH,IAAI,CACNI,IAAI,CAAC,kBAAkB,EAAE;IACtBD;EACJ,CAAC,CAAC,CACDE,IAAI,CAACC,QAAQ,IAAI;IACd,IAAIO,cAAc,GAAG,UAASC,MAAM,EAAE;MAClCC,UAAU,CAACZ,KAAK,EAAEW,MAAM,CAAC,CACxBT,IAAI,CAACE,IAAI,IAAI;QACV,IAAGA,IAAI,CAACS,MAAM,GAAG,CAAC,EAAC;UACfN,OAAO,CAACC,GAAG,CAACJ,IAAI,CAAC,CAAC,CAAC,CAACU,IAAI,CAAC;UACzB,IAAIC,IAAI,GAAGjB,SAAS,CAACkB,SAAS,CAACZ,IAAI,CAAC,CAAC,CAAC,CAACU,IAAI,CAAC;UAC5C,IAAGC,IAAI,EAAC;YACJ,OAAO;cACHA,IAAI,EAAEA,IAAI,CAACE,GAAG,GAAG,MAAM,GAAGF,IAAI,CAACG,IAAI;cACnCC,MAAM,EAAEf,IAAI,CAAC,CAAC,CAAC,CAACgB;YACpB,CAAC;UACL;QACJ;MACJ,CAAC,CAAC,CACDf,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;IACvC,CAAC;IACD,IAAGH,QAAQ,CAACC,IAAI,EAAC;MACb,IAAIA,IAAI,GAAGD,QAAQ,CAACC,IAAI;MACxBM,cAAc,CAACN,IAAI,CAACO,MAAM,CAAC;MAC3B,OAAOP,IAAI;IACf;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACJ,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;AAC3C;;AAEA;AACA,SAASe,UAAU,CAACrB,KAAK,EAAC;EACtB;EACA,OAAOH,IAAI,CACPI,IAAI,CAAC,kBAAkB,EAAE;IACrBD;EACJ,CAAC,CAAC,CACDE,IAAI,CAACC,QAAQ,IAAI;IACd,OAAOA,QAAQ,CAACC,IAAI;EACxB,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;AAC3C;;AAEA;AACA,SAASM,UAAU,CAACZ,KAAK,EAAEsB,EAAE,EAAC;EAC1B,OAAOzB,IAAI,CAACI,IAAI,CAAC,yBAAyB,EAAE;IACxCD,KAAK;IACLsB;EACJ,CAAC,CAAC,CACDpB,IAAI,CAACC,QAAQ,IAAI;IAAC,OAAOA,QAAQ,CAACC,IAAI;EAAA,CAAC,CAAC,CACxCC,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAAC;AACvC;AAEA,MAAMiB,QAAQ,GAAG;EACbd,WAAW;EACXY,UAAU;EACVT,UAAU;EACVb;AACJ,CAAC;AAED,eAAewB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}